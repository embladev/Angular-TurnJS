angular.module("angularTurn",[]),function(){"use strict";var e=function(e,t){function n(e,t,n,r){t.bind("turned",function(t,n,r){e.ctrl.isPageLoadEnabled&&e.ctrl.loadNextPages()}),e.ctrl.loadNextPages().then(function(n){document.getElementById("frontView").remove(),t.turn({width:e.ctrl.width,height:e.ctrl.height,autoCenter:e.ctrl.autoCenter}),e.ctrl.isPageLoadEnabled=!0},function(e){})}var r=function(e,t,n){var r=this;r.isPageLoadEnabled=!1,r.pageDirCtrls=[],r.lastProcessedPageDir=0,r.currentPage,r.virtualPages=[],r.minVirtualPages=6,r.height=n.ngbHeight,r.width=n.ngbWidth,r.autoCenter=n.ngbAutocenter,r.initializeFrontView=function(){t.parent().append('<div id="frontView"><h1>Loading book...</h1></div>')},r.register=function(e){r.pageDirCtrls.push(e)},r.turnPageForward=function(){r.loadNextPages()},r.loadNextPages=function(){return new Promise(function(e,t){r.pageDirCtrls.forEach(function(n){null==n.pageTemplate?n.loadTemplate().then(function(t){n.hasMoreContent&&(n.getHtml(),e("Success!"))},function(e){t("Failure!")}):n.hasMoreContent&&(n.getHtml(),e("Success!"))})})},r.initializeFrontView()};return{restrict:"E",scope:{},controller:r,controllerAs:"ctrl",link:n,replace:!0,transclude:!0,template:'<div id="angularTurnBook" ng-transclude></div>'}};angular.module("angularTurn").directive("book",e)}(),function(){"use strict";var e=function(){return{restrict:"E",replace:!0,transclude:!0,template:function(e,t){var n=t.ngbTitle;return n?'<div  class="hard"><h1>'+n+"</h1><div ng-transclude></div></div>":'<div  class="hard"><div ng-transclude></div></div>'},compile:function(e,t){return{pre:function(e,t,n){},post:function(e,t,n){}}}}};angular.module("angularTurn").directive("cover",e)}(),function(){"use strict";var e=function(e){function t(e,t,n,r,o,i){var l=this;l.id=a,l.pageTemplatePath=n.templt,l.pageTemplate=null,l.htmlContent,l.brokenPagesBuffer=[],l.overflowHtmlContent="",l.hasMoreContent=!0,l.loadTemplate=function(){return new Promise(function(e,t){i(function(){r.get(l.pageTemplatePath).then(function(t){l.pageTemplate=t.data,e("Success!")},function(){t("Failure!")})},3e3)})},l.makeVirtualPages=function(e){l.brokenPagesBuffer=[];var t={};for(t.overflowHtmlContent="";l.brokenPagesBuffer.length<e;){l.htmlContent+=getHtml(10);var n=l.breakPages(l.htmlContent,t.overflowHtmlContent);l.brokenPagesBuffer.concat(n.brokenPages),t.overflowHtmlContent=n.overflowHtmlContent}return l.overflowHtmlContent=n.overflowHtmlContent,l.brokenPagesBuffer},l.getHtml=function(n){var r=l.pageTemplate,a=angular.element(r);e.$apply(function(){t.append(o(a)(e))})},l.breakPages=function(e,t){}}function n(t,n,o,i){a++,e(o.ctrl,{$scope:t}),r=i[0],r.register(i[1])}var r,a=0;return{restrict:"E",require:["^book","page"],link:n,scope:{},controller:t,replace:!0,transclude:!0,template:"<div ng-transclude> </div>"}};angular.module("angularTurn").directive("page",e)}();